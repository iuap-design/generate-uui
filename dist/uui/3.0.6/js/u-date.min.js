u.TimeAdapter=u.BaseAdapter.extend({initialize:function(e){var t=this;u.TimeAdapter.superclass.initialize.apply(this,arguments),this.validType="time",this.maskerMeta=u.core.getMaskerMeta("time")||{},this.maskerMeta.format=this.dataModel.getMeta(this.field,"format")||this.maskerMeta.format,"u-clockpicker"!=this.options.type||u.isIE8?this.comp=new u.Time(this.element):this.comp=new u.ClockPicker(this.element);var a=this.dataModel.getMeta(this.field,"type");this.dataType=a||"string",this.comp.on("valueChange",function(e){if(t.slice=!0,""==e.value)t.dataModel.setValue(t.field,"");else{var a=t.dataModel.getValue(t.field);if("datetime"===t.dataType){var i=e.value.split(":");if(a=u.date.getDateObj(a)){if(e.value==a.getHours()+":"+a.getMinutes()+":"+a.getSeconds())return;a.setHours(i[0]),a.setMinutes(i[1]),a.setSeconds(i[2]),t.dataModel.setValue(t.field,u.date.format(a,"YYYY-MM-DD HH:mm:ss"))}else t.dataModel.setValue(t.field,"")}else{if(e.value==a)return;t.dataModel.setValue(t.field,e.value)}}t.slice=!1}),this.dataModel.ref(this.field).subscribe(function(e){t.modelValueChange(e)})},modelValueChange:function(e){if(!this.slice){var t="";if("datetime"===this.dataType){var a=u.date.getDateObj(e);t=a?a.getHours()+":"+a.getMinutes()+":"+a.getSeconds():""}else t=e;this.comp.setValue(t)}},setEnable:function(e){}}),u.compMgr.addDataAdapter({adapter:u.TimeAdapter,name:"u-time"}),u.compMgr.addDataAdapter({adapter:u.TimeAdapter,name:"u-clockpicker"}),u.DateTimeAdapter=u.BaseAdapter.extend({mixins:[u.ValueMixin,u.EnableMixin,u.RequiredMixin,u.ValidateMixin],init:function(e){var t,a=this;if("u-date"===this.options.type?this.adapterType="date":(this.adapterType="datetime",u.addClass(this.element,"time")),this.maskerMeta=u.core.getMaskerMeta(this.adapterType)||{},this.maskerMeta.format=this.options.format||this.maskerMeta.format,this.dataModel&&this.dataModel.on(this.field+".format."+u.DataTable.ON_CURRENT_META_CHANGE,function(e){a.setFormat(e.newValue)}),this.dataModel&&(t=this.dataModel.getMeta(this.field,"format")),this.maskerMeta.format=t||this.maskerMeta.format,this.startField=this.options.startField?this.options.startField:this.dataModel.getMeta(this.field,"startField"),this.comp=new u.DateTimePicker({el:this.element,format:this.maskerMeta.format}),this.element["u.DateTimePicker"]=this.comp,this.comp.on("select",function(e){a.setValue(e.value)}),this.dataModel&&(this.dataModel.ref(this.field).subscribe(function(e){a.modelValueChange(e)}),this.startField&&this.dataModel.ref(this.startField).subscribe(function(e){a.comp.setStartDate(e),(a.comp.date<u.date.getDateObj(e)||!e)&&a.dataModel.setValue(a.field,"")}),this.startField)){var i=this.dataModel.getValue(this.startField);i&&a.comp.setStartDate(i)}},modelValueChange:function(e){this.slice||(this.trueValue=e,this.comp.setDate(e))},setFormat:function(e){this.maskerMeta.format!=e&&(this.maskerMeta.format=e,this.comp.setFormat(e))},setValue:function(e){e="u-date"===this.options.type?u.date.format(e,"YYYY-MM-DD"):u.date.format(e,"YYYY-MM-DD HH:mm:ss"),this.trueValue=this.formater?this.formater.format(e):e,this.showValue=this.masker?this.masker.format(this.trueValue).value:this.trueValue,this.setShowValue(this.showValue),this.slice=!0,this.dataModel.setValue(this.field,this.trueValue),this.slice=!1},setEnable:function(e){e===!0||"true"===e?(this.enable=!0,this.element.removeAttribute("readonly"),this.comp._input.removeAttribute("readonly"),u.removeClass(this.element.parentNode,"disablecover")):e!==!1&&"false"!==e||(this.enable=!1,this.element.setAttribute("readonly","readonly"),this.comp._input.setAttribute("readonly","readonly"),u.addClass(this.element.parentNode,"disablecover")),this.comp.setEnable(e)}}),u.compMgr.addDataAdapter({adapter:u.DateTimeAdapter,name:"u-date"}),u.compMgr.addDataAdapter({adapter:u.DateTimeAdapter,name:"u-datetime"}),u.YearAdapter=u.BaseAdapter.extend({initialize:function(e,t){var a=this;u.YearAdapter.superclass.initialize.apply(this,arguments),this.validType="year",this.comp=new u.Year(this.element),this.comp.on("valueChange",function(e){a.slice=!0,a.dataModel.setValue(a.field,e.value),a.slice=!1}),this.dataModel.ref(this.field).subscribe(function(e){a.modelValueChange(e)})},modelValueChange:function(e){this.slice||this.comp.setValue(e)},setEnable:function(e){}}),u.compMgr.addDataAdapter({adapter:u.YearAdapter,name:"u-year"}),u.YearMonthAdapter=u.BaseAdapter.extend({initialize:function(e,t){var a=this;u.YearMonthAdapter.superclass.initialize.apply(this,arguments),this.validType="yearmonth",this.comp=new u.YearMonth(this.element),this.comp.on("valueChange",function(e){a.slice=!0,a.dataModel.setValue(a.field,e.value),a.slice=!1}),this.dataModel.ref(this.field).subscribe(function(e){a.modelValueChange(e)})},modelValueChange:function(e){this.slice||this.comp.setValue(e)},setEnable:function(e){}}),u.compMgr.addDataAdapter({adapter:u.YearMonthAdapter,name:"u-yearmonth"}),u.MonthAdapter=u.BaseAdapter.extend({initialize:function(e,t){var a=this;u.MonthAdapter.superclass.initialize.apply(this,arguments),this.validType="month",this.comp=new u.Month(this.element),this.comp.on("valueChange",function(e){a.slice=!0,a.dataModel.setValue(a.field,e.value),a.slice=!1}),this.dataModel.ref(this.field).subscribe(function(e){a.modelValueChange(e)})},modelValueChange:function(e){this.slice||this.comp.setValue(e)},setEnable:function(e){}}),u.compMgr.addDataAdapter({adapter:u.MonthAdapter,name:"u-month"});