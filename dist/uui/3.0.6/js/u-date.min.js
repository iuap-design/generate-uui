/** 
 * datetimepicker v3.0.6
 * dateTime
 * author : yonyou FED
 * homepage : https://github.com/iuap-design/datetimepicker#readme
 * bugs : https://github.com/iuap-design/datetimepicker/issues
 **/ 
u.DateTimePicker=u.BaseComponent.extend({}),u.DateTimePicker.fn=u.DateTimePicker.prototype,u.DateTimePicker.fn.init=function(){var t,e,i=this;this.enable=!0,this._element=this.element,this._input=this._element.querySelector("input"),u.isMobile,setTimeout(function(){i._input.setAttribute("readonly","readonly")},1e3),u.on(this._input,"focus",function(t){u.isMobile&&this.blur(),i._inputFocus=!0,i.isShow!==!0&&i.show(t),u.stopEvent(t)}),u.on(this._input,"blur",function(t){i._inputFocus=!1}),this._span=this._element.querySelector("span"),this._span&&u.on(this._span,"click",function(t){i._input.focus(),u.stopEvent(t)}),u.hasClass(this._element,"time")?(this.type="datetime",e="YYYY-MM-DD hh:mm:ss"):(this.type="date",e="YYYY-MM-DD"),t=this._element.getAttribute("format"),this.format=t||this.options.format||e,this.isShow=!1},u.DateTimePicker.fn._carousel=function(t,e){if("left"==e?u.addClass(t,"right-page"):u.addClass(t,"left-page"),this._dateContent.appendChild(t),u.isIE8||u.isIE9||u.isFF){var n=this._dateContent.querySelectorAll(".u-date-content-page");for(i=0;i<n.length;i++)this._dateContent.removeChild(n[i]);this.contentPage=t,this._dateContent.appendChild(t),"left"==e?u.removeClass(t,"right-page"):u.removeClass(t,"left-page")}else{var s=function(){t.removeEventListener("transitionend",s),t.removeEventListener("webkitTransitionEnd",s);var e=this._dateContent.querySelectorAll(".u-date-content-page");for(i=0;i<e.length;i++)this._dateContent.removeChild(e[i]);this.contentPage=t,this._dateContent.appendChild(t)}.bind(this);t.addEventListener("transitionend",s),t.addEventListener("webkitTransitionEnd",s),window.requestAnimationFrame&&window.requestAnimationFrame(function(){"left"==e?(u.addClass(this.contentPage,"left-page"),u.removeClass(t,"right-page")):(u.addClass(this.contentPage,"right-page"),u.removeClass(t,"left-page"))}.bind(this))}},u.DateTimePicker.fn._zoomIn=function(t){if(!this.contentPage)return this._dateContent.appendChild(t),void(this.contentPage=t);if(u.addClass(t,"zoom-in"),this._dateContent.appendChild(t),u.isIE8||u.isIE9||u.isFF){var e=this._dateContent.querySelectorAll(".u-date-content-page");for(i=0;i<e.length;i++)this._dateContent.removeChild(e[i]);this.contentPage=t,this._dateContent.appendChild(t),u.removeClass(t,"zoom-in")}else{var n=function(){t.removeEventListener("transitionend",n),t.removeEventListener("webkitTransitionEnd",n);var e=this._dateContent.querySelectorAll(".u-date-content-page");for(i=0;i<e.length;i++)this._dateContent.removeChild(e[i]);this.contentPage=t,this._dateContent.appendChild(t)}.bind(this);this.contentPage&&(t.addEventListener("transitionend",n),t.addEventListener("webkitTransitionEnd",n)),window.requestAnimationFrame&&window.requestAnimationFrame(function(){u.addClass(this.contentPage,"is-hidden"),u.removeClass(t,"zoom-in")}.bind(this))}},u.DateTimePicker.fn._fillYear=function(t){var e,i,n,s,a,c,l,o,e,r,h,d;for(i=['<div class="u-date-content-page">','<div class="u-date-content-title">',"</div>",'<div class="u-date-content-panel"></div>',"</div>"].join(""),t=t||"current",a=this.pickerDate.getFullYear(),"current"===t?this.startYear=a-a%10-1:"preivous"===t?this.startYear=this.startYear-10:this.startYear=this.startYear+10,n=u.makeDOM(i),o=u.core.getLanguages(),e=u.date._formats.YYYY(this.pickerDate),r=u.date._formats.MM(this.pickerDate,o),h=u.date._formats.DD(this.pickerDate,o),d=u.date._formats.HH(this.pickerDate,o)+":"+u.date._formats.mm(this.pickerDate,o)+":"+u.date._formats.ss(this.pickerDate,o),this._yearTitle=n.querySelector(".u-date-content-title"),this._yearTitle.innerHTML=e,"date"==this.type&&(this._headerTime.style.display="none"),s=n.querySelector(".u-date-content-panel"),c=0;12>c;c++)l=u.makeDOM('<div class="u-date-content-year-cell">'+(this.startYear+c)+"</div>"),new URipple(l),this.startYear+c==a&&u.addClass(l,"current"),this.startYear+c<this.beginYear&&u.addClass(l,"u-disabled"),l._value=this.startYear+c,s.appendChild(l);u.on(s,"click",function(t){if(!u.hasClass(t.target,"u-disabled")){var e=t.target._value;this.pickerDate.setYear(e),this._updateDate(),this._fillMonth()}}.bind(this)),"current"===t?this._zoomIn(n):"next"===t?this._carousel(n,"left"):"preivous"===t&&this._carousel(n,"right"),this.currentPanel="year"},u.DateTimePicker.fn._fillMonth=function(){var t,e,i,n,s,a,c,l,o,r;for(t=['<div class="u-date-content-page">','<div class="u-date-content-title">',"</div>",'<div class="u-date-content-panel">','<div class="u-date-content-year-cell">1月</div>','<div class="u-date-content-year-cell">2月</div>','<div class="u-date-content-year-cell">3月</div>','<div class="u-date-content-year-cell">4月</div>','<div class="u-date-content-year-cell">5月</div>','<div class="u-date-content-year-cell">6月</div>','<div class="u-date-content-year-cell">7月</div>','<div class="u-date-content-year-cell">8月</div>','<div class="u-date-content-year-cell">9月</div>','<div class="u-date-content-year-cell">10月</div>','<div class="u-date-content-year-cell">11月</div>','<div class="u-date-content-year-cell">12月</div>',"</div>","</div>"].join(""),e=u.makeDOM(t),a=u.core.getLanguages(),c=u.date._formats.YYYY(this.pickerDate),l=u.date._formats.MM(this.pickerDate,a),o=u.date._formats.DD(this.pickerDate,a),r=u.date._formats.HH(this.pickerDate,a)+":"+u.date._formats.mm(this.pickerDate,a)+":"+u.date._formats.ss(this.pickerDate,a),this._monthTitle=e.querySelector(".u-date-content-title"),this._monthTitle.innerHTML=u.date._formats.MMM(this.pickerDate,a),"date"==this.type&&(this._headerTime.style.display="none"),n=e.querySelectorAll(".u-date-content-year-cell"),s=0;s<n.length;s++)i-1==s&&u.addClass(n[s],"current"),this.pickerDate.getFullYear()==this.beginYear&&s<this.beginMonth&&u.addClass(n[s],"u-disabled"),this.pickerDate.getFullYear()<this.beginYear&&u.addClass(n[s],"u-disabled"),n[s]._value=s,new URipple(n[s]);u.on(e,"click",function(t){if(!u.hasClass(t.target,"u-disabled")&&!u.hasClass(t.target,"u-date-content-title")){var e=t.target._value;this.pickerDate.setMonth(e),this._updateDate(),this._fillDate()}}.bind(this)),this._zoomIn(e),this.currentPanel="month"},u.DateTimePicker.fn._getPickerStartDate=function(t){var e=new Date(t);e.setDate(1);var i=e.getDay();return e=u.date.sub(e,"d",i)},u.DateTimePicker.fn._getPickerEndDate=function(t){var e=new Date(t);e.setDate(1),e.setMonth(e.getMonth()+1),e.setDate(0);var i=e.getDay();return e=u.date.add(e,"d",6-i)},u.DateTimePicker.fn._fillDate=function(t){var e,i,n,s,a,c,l,o,r,h,d,p=this;for(t=t||"current",r="current"===t?this.pickerDate:"preivous"===t?u.date.sub(this.startDate,"d",1):u.date.add(this.endDate,"d",1),this.startDate=this._getPickerStartDate(r),this.endDate=this._getPickerEndDate(r),o=u.core.getLanguages(),e=u.date._formats.YYYY(r),i=u.date._formats.MM(r,o),date=u.date._formats.DD(r,o),n=u.date._formats.HH(r,o)+":"+u.date._formats.mm(r,o)+":"+u.date._formats.ss(r,o),s=['<div class="u-date-content-page">','<div class="u-date-content-title">','<div class="u-date-content-title-year"></div>-','<div class="u-date-content-title-month"></div>-','<div class="u-date-content-title-date"></div>','<div class="u-date-content-title-time"></div>',"</div>",'<div class="u-date-week"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></div>','<div class="u-date-content-panel"></div>',"</div>"].join(""),a=u.makeDOM(s),this._headerYear=a.querySelector(".u-date-content-title-year"),this._headerYear.innerHTML=e,this._headerMonth=a.querySelector(".u-date-content-title-month"),this._headerMonth.innerHTML=i,this._headerDate=a.querySelector(".u-date-content-title-date"),this._headerDate.innerHTML=date,this._headerTime=a.querySelector(".u-date-content-title-time"),this._headerTime.innerHTML=n,"date"==this.type&&(this._headerTime.style.display="none"),u.on(this._headerYear,"click",function(t){p._fillYear(),u.stopEvent(t)}),u.on(this._headerMonth,"click",function(t){p._fillMonth(),u.stopEvent(t)}),u.on(this._headerTime,"click",function(t){p._fillTime(),u.stopEvent(t)}),l=a.querySelectorAll(".u-date-week span"),h=0;7>h;h++)l[h].innerHTML=u.date._dateLocale[o].weekdaysMin[h];for(c=a.querySelector(".u-date-content-panel"),r=this.startDate;r<=this.endDate;)d=u.makeDOM('<div class="u-date-cell" unselectable="on" onselectstart="return false;">'+r.getDate()+"</div>"),r.getFullYear()==this.pickerDate.getFullYear()&&r.getMonth()==this.pickerDate.getMonth()&&r.getDate()==this.pickerDate.getDate()&&u.addClass(d,"current"),(r.getFullYear()<this.beginYear||r.getFullYear()==this.beginYear&&r.getMonth()<this.beginMonth)&&(u.addClass(d,"u-disabled"),u.removeClass(d,"current")),r.getFullYear()==this.beginYear&&r.getMonth()==this.beginMonth&&r.getDate()<this.beginDate&&(u.addClass(d,"u-disabled"),u.removeClass(d,"current")),d._value=r.getDate(),d._month=r.getMonth(),d._year=r.getFullYear(),new URipple(d),c.appendChild(d),r=u.date.add(r,"d",1);u.on(c,"click",function(t){if(!u.hasClass(t.target,"u-disabled")){var e=t.target._value;if(e){this.pickerDate.setFullYear(t.target._year),this.pickerDate.setMonth(t.target._month),this.pickerDate.setDate(e);var i=t.target.parentNode.querySelector(".u-date-cell.current");i&&(u.removeClass(i,"current"),(u.isIE8||u.isIE9)&&(i.style.backgroundColor="#fff")),u.addClass(t.target,"current"),(u.isIE8||u.isIE9)&&(t.target.style.backgroundColor="#3f51b5"),this._updateDate(),"date"===this.type&&this.onOk()}}}.bind(this)),"current"===t?this._zoomIn(a):"next"===t?this._carousel(a,"left"):"preivous"===t&&this._carousel(a,"right"),this.currentPanel="date"},u.DateTimePicker.fn._fillTime=function(t){var e,i,n,s,a,c,l,o,r,h,d=this;t=t||"current",r="current"===t?this.pickerDate:"preivous"===t?u.date.sub(this.startDate,"d",1):u.date.add(this.endDate,"d",1),this.startDate=this._getPickerStartDate(r),this.endDate=this._getPickerEndDate(r),o=u.core.getLanguages(),e=u.date._formats.YYYY(r),i=u.date._formats.MM(r,o),n=u.date._formats.DD(r,o),s=u.date._formats.HH(r,o)+":"+u.date._formats.mm(r,o)+":"+u.date._formats.ss(r,o),a=['<div class="u-date-content-page">','<div class="u-date-content-title">','<div class="u-date-content-title-year"></div>-','<div class="u-date-content-title-month"></div>-','<div class="u-date-content-title-date"></div>','<div class="u-date-content-title-time"></div>',"</div>",'<div class="u-date-content-panel"></div>',"</div>"].join(""),c=u.makeDOM(a),this._headerYear=c.querySelector(".u-date-content-title-year"),this._headerYear.innerHTML=e,this._headerMonth=c.querySelector(".u-date-content-title-month"),this._headerMonth.innerHTML=i,this._headerDate=c.querySelector(".u-date-content-title-date"),this._headerDate.innerHTML=n,this._headerTime=c.querySelector(".u-date-content-title-time"),this._headerTime.innerHTML=s,"date"==this.type&&(this._headerTime.style.display="none"),u.on(this._headerYear,"click",function(t){d._fillYear(),u.stopEvent(t)}),u.on(this._headerMonth,"click",function(t){d._fillMonth(),u.stopEvent(t)}),u.on(this._headerTime,"click",function(t){d._fillTime(),u.stopEvent(t)}),l=c.querySelector(".u-date-content-panel"),u.isIE8?(timetemplate=['<div class="u_time_box">','<div class="u_time_cell">','<div class="show_hour_cell">'+u.date._formats.HH(r)+"</div>","</div>",'<div class="u_time_cell">','<div class="show_min_cell">'+u.date._formats.mm(r)+"</div>","</div>",'<div class="u_time_cell">','<div class="show_sec_cell">'+u.date._formats.ss(r)+"</div>","</div>","</div>"].join(""),h=u.makeDOM(timetemplate),l.appendChild(h),u.on(l,"click",function(t){var e=t.target.getAttribute("class").split("_");if("add"==e[0]){if("hour"==e[1]){var i=Number(u.date._formats.HH(this.pickerDate));23>i?i++:i=0,this.pickerDate.setHours(i),l.querySelector(".show_hour_cell").innerHTML=i}else if("min"==e[1]){var n=Number(u.date._formats.mm(this.pickerDate));59>n?n++:n=0,this.pickerDate.setMinutes(n)}else if("sec"==e[1]){var s=Number(u.date._formats.ss(this.pickerDate));59>s?s++:s=0,this.pickerDate.setSeconds(s)}}else{if("subtract"!=e[0]){if("show"==e[0]){var a=t.target,c=u.makeDOM("<input type='text' class='u-input'>");if(a.querySelector(".u-input"))return;if(this._updateDate(),c.value=a.innerHTML,a.innerHTML="",a.appendChild(c),"hour"==e[1]){var o=new u.Validate(c,{validType:"integer",minLength:0,maxLength:2,min:0,max:23});u.on(c,"blur",function(){o.passed&&(d.pickerDate.setHours(c.value),d._updateDate())})}else if("min"==e[1]){var o=new u.Validate(c,{validType:"integer",minLength:0,maxLength:2,min:0,max:59});u.on(c,"blur",function(){o.passed&&(d.pickerDate.setMinutes(c.value),d._updateDate())})}else if("sec"==e[1]){var o=new u.Validate(c,{validType:"integer",minLength:0,maxLength:2,min:0,max:59});u.on(c,"blur",function(){o.passed&&(d.pickerDate.setSeconds(c.value),d._updateDate())})}return void c.focus()}return!1}if("hour"==e[1]){var i=Number(u.date._formats.HH(this.pickerDate));i>0?i--:i=23,this.pickerDate.setHours(i)}else if("min"==e[1]){var n=Number(u.date._formats.mm(this.pickerDate));n>0?n--:n=59,this.pickerDate.setMinutes(n)}else if("sec"==e[1]){var s=Number(u.date._formats.ss(this.pickerDate));s>0?s--:s=59,this.pickerDate.setSeconds(s)}}this._updateDate()}.bind(this))):(timetemplate='<div class="u-combo-ul clockpicker-popover is-visible" style="width:100%;padding:0px;">',timetemplate+='<div class="popover-content">',timetemplate+='  <div class="clockpicker-plate data-clockpicker-plate">',timetemplate+='      <div class="clockpicker-canvas">',timetemplate+='          <svg class="clockpicker-svg">',timetemplate+='              <g transform="translate(100,100)">',timetemplate+='                  <circle class="clockpicker-canvas-bg clockpicker-canvas-bg-trans" r="13" cx="8.362277061412277" cy="-79.56175162946187"></circle>',timetemplate+='                  <circle class="clockpicker-canvas-fg" r="3.5" cx="8.362277061412277" cy="-79.56175162946187"></circle>',timetemplate+='                  <line x1="0" y1="0" x2="8.362277061412277" y2="-79.56175162946187"></line>',timetemplate+='                  <circle class="clockpicker-canvas-bearing" cx="0" cy="0" r="2"></circle>',timetemplate+="              </g>",timetemplate+="          </svg>",timetemplate+="      </div>",timetemplate+='      <div class="clockpicker-dial clockpicker-hours" style="visibility: visible;">',timetemplate+='          <div class="clockpicker-tick clockpicker-tick-1" >00</div>',timetemplate+='          <div class="clockpicker-tick clockpicker-tick-2" >1</div>',timetemplate+='          <div class="clockpicker-tick clockpicker-tick-3" >2</div>',timetemplate+='          <div class="clockpicker-tick clockpicker-tick-4" >3</div>',timetemplate+='          <div class="clockpicker-tick clockpicker-tick-5" >4</div>',timetemplate+='          <div class="clockpicker-tick clockpicker-tick-6" >5</div>',timetemplate+='          <div class="clockpicker-tick clockpicker-tick-7" >6</div>',timetemplate+='          <div class="clockpicker-tick clockpicker-tick-8" >7</div>',timetemplate+='          <div class="clockpicker-tick clockpicker-tick-9" >8</div>',timetemplate+='          <div class="clockpicker-tick clockpicker-tick-10" >9</div>',timetemplate+='          <div class="clockpicker-tick clockpicker-tick-11" >10</div>',timetemplate+='          <div class="clockpicker-tick clockpicker-tick-12" >11</div>',timetemplate+='          <div class="clockpicker-tick clockpicker-tick-13" >12</div>',timetemplate+='          <div class="clockpicker-tick clockpicker-tick-14" >13</div>',timetemplate+='          <div class="clockpicker-tick clockpicker-tick-15" >14</div>',timetemplate+='          <div class="clockpicker-tick clockpicker-tick-16" >15</div>',timetemplate+='          <div class="clockpicker-tick clockpicker-tick-17" >16</div>',timetemplate+='          <div class="clockpicker-tick clockpicker-tick-18" >17</div>',timetemplate+='          <div class="clockpicker-tick clockpicker-tick-19" >18</div>',timetemplate+='          <div class="clockpicker-tick clockpicker-tick-20" >19</div>',timetemplate+='          <div class="clockpicker-tick clockpicker-tick-21" >20</div>',timetemplate+='          <div class="clockpicker-tick clockpicker-tick-22" >21</div>',timetemplate+='          <div class="clockpicker-tick clockpicker-tick-23" >22</div>',timetemplate+='          <div class="clockpicker-tick clockpicker-tick-24" >23</div>',timetemplate+="      </div>",timetemplate+='      <div class="clockpicker-dial clockpicker-minutes" style="visibility: hidden;">',timetemplate+='          <div class="clockpicker-tick clockpicker-tick-25" >00</div>',timetemplate+='          <div class="clockpicker-tick clockpicker-tick-26" >05</div>',timetemplate+='          <div class="clockpicker-tick clockpicker-tick-27" >10</div>',timetemplate+='          <div class="clockpicker-tick clockpicker-tick-28" >15</div>',timetemplate+='          <div class="clockpicker-tick clockpicker-tick-29" >20</div>',timetemplate+='          <div class="clockpicker-tick clockpicker-tick-30" >25</div>',timetemplate+='          <div class="clockpicker-tick clockpicker-tick-31" >30</div>',timetemplate+='          <div class="clockpicker-tick clockpicker-tick-32" >35</div>',timetemplate+='          <div class="clockpicker-tick clockpicker-tick-33" >40</div>',timetemplate+='          <div class="clockpicker-tick clockpicker-tick-34" >45</div>',timetemplate+='          <div class="clockpicker-tick clockpicker-tick-35" >50</div>',timetemplate+='          <div class="clockpicker-tick clockpicker-tick-36" >55</div>',timetemplate+="      </div>",timetemplate+='  </div><span class="clockpicker-am-pm-block"></span></div>',timetemplate+="  </div>",h=u.makeDOM(timetemplate),this.cell=h,l.appendChild(h),this.hand=h.querySelector("line"),this.bg=h.querySelector(".clockpicker-canvas-bg"),this.fg=h.querySelector(".clockpicker-canvas-fg"),this.titleHourSpan=h.querySelector(".clockpicker-span-hours"),this.titleMinSpan=h.querySelector(".clockpicker-span-minutes"),this.hourDiv=h.querySelector(".clockpicker-hours"),this.minDiv=h.querySelector(".clockpicker-minutes"),this.currentView="hours",this.hours=u.date._formats.HH(r),this.min=u.date._formats.mm(r),this.sec=u.date._formats.ss(r),u.on(this.hourDiv,"click",function(t){var e=t.target;if(u.hasClass(e,"clockpicker-tick")){this.hours=e.innerHTML,this.hours=this.hours>9||0==this.hours?""+this.hours:"0"+this.hours,d.pickerDate.setHours(this.hours);var i=u.core.getLanguages(),n=u.date._formats.HH(this.pickerDate,i)+":"+u.date._formats.mm(this.pickerDate,i)+":"+u.date._formats.ss(this.pickerDate,i);this._headerTime.innerHTML=n,this.hourDiv.style.visibility="hidden",this.minDiv.style.visibility="visible",this.currentView="min",this.setHand()}}.bind(this)),u.on(this.minDiv,"click",function(t){var e=t.target;if(u.hasClass(e,"clockpicker-tick")){this.min=e.innerHTML,d.pickerDate.setMinutes(this.min);var i=u.core.getLanguages(),n=u.date._formats.HH(this.pickerDate,i)+":"+u.date._formats.mm(this.pickerDate,i)+":"+u.date._formats.ss(this.pickerDate,i);this._headerTime.innerHTML=n,this.minDiv.style.visibility="hidden",this.hourDiv.style.visibility="visible",this.currentView="hours",this.setHand()}}.bind(this))),this._zoomIn(c),u.isIE8||this.setHand(),this.currentPanel="time",l.onselectstart=new Function("return false")},u.DateTimePicker.fn.setHand=function(){var t=54,e=80,i=this.currentView,n=this[i],s="hours"===i,a=Math.PI/(s?6:30),c=n*a,l=s&&n>0&&13>n?t:e,o=Math.sin(c)*l,r=-Math.cos(c)*l;this.setHandFun(o,r)},u.DateTimePicker.fn.setHandFun=function(t,e,i,n){var s,a=54,c=80,l=Math.atan2(t,-e),o="hours"===this.currentView,r=Math.PI/(o?6:30),u=Math.sqrt(t*t+e*e),h=this.options,d=o&&(c+a)/2>u,p=d?a:c;this.twelvehour&&(p=c),0>l&&(l=2*Math.PI+l),s=Math.round(l/r),l=s*r,h.twelvehour?o?0===s&&(s=12):(i&&(s*=5),60===s&&(s=0)):o?(12===s&&(s=0),s=d?0===s?12:s:0===s?0:s+12):(i&&(s*=5),60===s&&(s=0));var v=this._panel.offsetWidth,k=v/294,m=Math.sin(l)*p*k,f=-Math.cos(l)*p*k,D=100*k;this.cell.querySelector("g").setAttribute("transform","translate("+D+","+D+")"),this.hand.setAttribute("x2",m),this.hand.setAttribute("y2",f),this.bg.setAttribute("cx",m),this.bg.setAttribute("cy",f),this.fg.setAttribute("cx",m),this.fg.setAttribute("cy",f)},u.DateTimePicker.fn._updateDate=function(){var t,e,i,n,s;s=u.core.getLanguages(),t=u.date._formats.YYYY(this.pickerDate),e=u.date._formats.MM(this.pickerDate,s),n=u.date._formats.HH(this.pickerDate,s)+":"+u.date._formats.mm(this.pickerDate,s)+":"+u.date._formats.ss(this.pickerDate,s),i=u.date._formats.DD(this.pickerDate,s),this._headerYear&&(this._headerYear.innerHTML="",this._headerYear.innerHTML=t),this._headerMonth&&(this._headerMonth.innerHTML="",this._headerMonth.innerHTML=e),this._headerDate&&(this._headerDate.innerHTML="",this._headerDate.innerHTML=i),this._headerTime&&(this._headerTime.innerHTML="",this._headerTime.innerHTML=n),"time"==this.currentPanel&&u.isIE8&&(this._panel.querySelector(".show_hour_cell").innerHTML=u.date._formats.HH(this.pickerDate,s),this._panel.querySelector(".show_min_cell").innerHTML=u.date._formats.mm(this.pickerDate,s),this._panel.querySelector(".show_sec_cell").innerHTML=u.date._formats.ss(this.pickerDate,s))},u.DateTimePicker.fn._response=function(){return},u.dateTimePickerTemplateArr=['<div class="u-date-panel">','<div class="u-date-body">','<div class="u-date-content"></div>',"</div>",'<div class="u-date-nav">','<button class="u-button u-date-ok right primary">确定</button>','<button class="u-button u-date-cancel right">取消</button>','<button class="u-button u-date-clean">清空</button>',"</div>","</div>"],u.DateTimePicker.fn.show=function(t){if(this.enable){var e=this._input.value;this.setDate(e);var i=this;if(!this._panel){this._panel=u.makeDOM(u.dateTimePickerTemplateArr.join("")),u.isMobile&&(u.removeClass(this._panel,"u-date-panel"),u.addClass(this._panel,"u-date-panel-mobile")),this._dateNav=this._panel.querySelector(".u-date-nav"),"date"!==this.type||u.isMobile||(this._dateNav.style.display="none"),this._dateContent=this._panel.querySelector(".u-date-content"),"datetime"==this.type,this.btnOk=this._panel.querySelector(".u-date-ok"),this.btnCancel=this._panel.querySelector(".u-date-cancel"),this.btnClean=this._panel.querySelector(".u-date-clean");var n=document.createElement("span");u.addClass(n,"u-ripple"),this.btnOk.appendChild(n);var n=document.createElement("span");u.addClass(n,"u-ripple"),this.btnCancel.appendChild(n);var n=document.createElement("span");u.addClass(n,"u-ripple"),this.btnClean.appendChild(n),new URipple(this.btnOk),new URipple(this.btnCancel),new URipple(this.btnClean),u.on(this.btnOk,"click",function(t){this.onOk(),u.stopEvent(t)}.bind(this)),u.on(this.btnCancel,"click",function(t){i.onCancel(),u.stopEvent(t)}),u.on(this.btnClean,"click",function(t){i.pickerDate=null,i.onOk(),u.stopEvent(t)}),this.preBtn=u.makeDOM('<button class="u-date-pre-button u-button mini">&lt;</button>'),this.nextBtn=u.makeDOM('<button class="u-date-next-button u-button mini">&gt;</button>'),u.on(this.preBtn,"click",function(t){"date"==i.currentPanel?i._fillDate("preivous"):"year"==i.currentPanel&&i._fillYear("preivous"),u.stopEvent(t)}),u.on(this.nextBtn,"click",function(t){"date"==i.currentPanel?i._fillDate("next"):"year"==i.currentPanel&&i._fillYear("next"),u.stopEvent(t)}),this._dateContent.appendChild(this.preBtn),this._dateContent.appendChild(this.nextBtn),document.body.appendChild(this._panel)}if(this.pickerDate=this.date||new Date,this._updateDate(),this._fillDate(),this._response(),u.on(window,"resize",function(){i._response()}),u.isMobile&&(this.overlayDiv=u.makeModal(this._panel),u.on(this.overlayDiv,"click",function(){i.onCancel()})),u.addClass(this._panel,"is-visible"),!u.isMobile){u.showPanelByEle({ele:this._input,panel:this._panel,position:"bottomLeft"}),this._panel.style.marginLeft="0px";var s=function(e){e===t||e.target===i._input||u.hasClass(e.target,"u-date-content-year-cell")||u.hasClass(e.target,"u-date-content-year-cell")||u.closest(e.target,"u-date-panel")===i._panel||1==i._inputFocus||(u.off(document,"click",s),i.onCancel())};u.on(document,"click",s),document.body.onscroll=function(){u.showPanelByEle({ele:i._input,panel:i._panel,position:"bottomLeft"})}}this.isShow=!0}},u.DateTimePicker.fn.onOk=function(){this.setDate(this.pickerDate),this.isShow=!1,u.removeClass(this._panel,"is-visible");try{document.body.removeChild(this.overlayDiv)}catch(t){}this.trigger("select",{value:this.pickerDate})},u.DateTimePicker.fn.onCancel=function(){this.isShow=!1,u.removeClass(this._panel,"is-visible");try{document.body.removeChild(this.overlayDiv)}catch(t){}},u.DateTimePicker.fn.setDate=function(t){if(!t)return this.date=null,void(this._input.value="");var e=u.date.getDateObj(t);if(e){if(this.beginDateObj&&e<this.beginDateObj)return;this.date=e,this._input.value=u.date.format(this.date,this.format)}},u.DateTimePicker.fn.setFormat=function(t){this.format=t,this._input.value=u.date.format(this.date,this.format)},u.DateTimePicker.fn.setStartDate=function(t){t&&(this.beginDateObj=u.date.getDateObj(t),this.beginYear=this.beginDateObj.getFullYear(),this.beginMonth=this.beginDateObj.getMonth(),this.beginDate=this.beginDateObj.getDate())},u.DateTimePicker.fn.setEnable=function(t){t===!0||"true"===t?this.enable=!0:this.enable=!1},u.compMgr&&u.compMgr.regComp({comp:u.DateTimePicker,compAsString:"u.DateTimePicker",css:"u-datepicker"}),u.Time=u.BaseComponent.extend({DEFAULTS:{},init:function(){this.element;this.options=u.extend({},this.DEFAULTS,this.options),this.panelDiv=null,this.input=this.element.querySelector("input"),u.addClass(this.element,"u-text"),u.on(this.input,"blur",function(t){this.setValue(this.input.value)}.bind(this)),this.focusEvent(),this.clickEvent()}}),u.Time.fn=u.Time.prototype,u.Time.fn.createPanel=function(){if(!this.panelDiv){var t=this;this.panelDiv=u.makeDOM('<div class="u-combo-ul" style="padding:0px;"></div>'),this.panelContentDiv=u.makeDOM('<div class="u-time-content"></div>'),this.panelDiv.appendChild(this.panelContentDiv),this.panelHourDiv=u.makeDOM('<div class="u-time-cell"></div>'),this.panelContentDiv.appendChild(this.panelHourDiv),this.panelHourInput=u.makeDOM('<input class="u-time-input">'),this.panelHourDiv.appendChild(this.panelHourInput),this.panelMinDiv=u.makeDOM('<div class="u-time-cell"></div>'),this.panelContentDiv.appendChild(this.panelMinDiv),this.panelMinInput=u.makeDOM('<input class="u-time-input">'),this.panelMinDiv.appendChild(this.panelMinInput),this.panelSecDiv=u.makeDOM('<div class="u-time-cell"></div>'),this.panelContentDiv.appendChild(this.panelSecDiv),this.panelSecInput=u.makeDOM('<input class="u-time-input">'),this.panelSecDiv.appendChild(this.panelSecInput),this.panelNavDiv=u.makeDOM('<div class="u-time-nav"></div>'),this.panelDiv.appendChild(this.panelNavDiv),this.panelOKButton=u.makeDOM('<button class="u-button" style="float:right;">OK</button>'),this.panelNavDiv.appendChild(this.panelOKButton),u.on(this.panelOKButton,"click",function(){var e=t.panelHourInput.value+":"+t.panelMinInput.value+":"+t.panelSecInput.value;t.setValue(e),t.hide()}),this.panelCancelButton=u.makeDOM('<button class="u-button" style="float:right;">Cancel</button>'),this.panelNavDiv.appendChild(this.panelCancelButton),u.on(this.panelCancelButton,"click",function(){t.hide()});var e=new Date;this.panelHourInput.value=e.getHours()>9?""+e.getHours():"0"+e.getHours(),this.panelMinInput.value=e.getMinutes()>9?""+e.getMinutes():"0"+e.getMinutes(),this.panelSecInput.value=e.getSeconds()>9?""+e.getSeconds():"0"+e.getSeconds(),this.element.parentNode.appendChild(this.panelDiv)}},u.Time.fn.setValue=function(t){var e="",i="",n="";if(t=t?t:"",t!=this.input.value){if(t&&t.indexOf(":")>-1){var s=t.split(":"),e=s[0];e%=24,e=e>9?""+e:"0"+e;var i=s[1];i%=60,i=i>9?""+i:"0"+i;var n=s[2];n%=60,n=n>9?""+n:"0"+n,t=e+":"+i+":"+n}this.input.value=t,this.createPanel(),this.panelHourInput.value=e,this.panelMinInput.value=i,this.panelSecInput.value=n,this.trigger("valueChange",{value:t})}},u.Time.fn.focusEvent=function(){var t=this;u.on(this.element,"click",function(e){t.show(e),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0})},u.Time.fn.clickEvent=function(){var t=this,e=this.element.nextSibling;u.on(e,"click",function(e){t.show(e),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0})},u.Time.fn.show=function(t){var e=this.input.value;this.setValue(e);var i=this;this.createPanel(),this.width=this.element.offsetWidth,this.width<300&&(this.width=300),this.panelDiv.style.width=this.width+"px",u.showPanelByEle({ele:this.input,panel:this.panelDiv,position:"bottomLeft"}),this.panelDiv.style.zIndex=u.getZIndex(),u.addClass(this.panelDiv,"is-visible"),document.body.onscroll=function(){u.showPanelByEle({ele:i.input,panel:i.panelDiv,position:"bottomLeft"})};var n=function(e){e===t||e.target===this.input||i.clickPanel(e.target)||(u.off(document,"click",n),this.hide())}.bind(this);u.on(document,"click",n)},u.Time.fn.clickPanel=function(t){for(;t;){if(t==this.panelDiv)return!0;t=t.parentNode}return!1},u.Time.fn.hide=function(){u.removeClass(this.panelDiv,"is-visible"),this.panelDiv.style.zIndex=-1},u.compMgr&&(u.compMgr.regComp({comp:u.Time,compAsString:"u.Time",css:"u-time"}),u.isIE8&&u.compMgr.regComp({comp:u.Time,compAsString:"u.ClockPicker",css:"u-clockpicker"})),u.YearMonth=u.BaseComponent.extend({DEFAULTS:{},init:function(){this.element;this.options=u.extend({},this.DEFAULTS,this.options),this.panelDiv=null,this.input=this.element.querySelector("input");var t=new Date;this.year=t.getFullYear(),this.startYear=this.year-this.year%10-1,this.month=t.getMonth()+1,u.on(this.input,"blur",function(t){this.setValue(this.input.value)}.bind(this)),this.focusEvent(),this.clickEvent()}}),u.YearMonth.fn=u.YearMonth.prototype,u.YearMonth.fn.createPanel=function(){if(this.panelDiv)return void this._fillYear();var t=this;this.panelDiv=u.makeDOM('<div class="u-date-panel" style="padding:0px;margin:0px;"></div>'),this.panelContentDiv=u.makeDOM('<div class="u-date-content"></div>'),this.panelDiv.appendChild(this.panelContentDiv),this.preBtn=u.makeDOM('<button class="u-date-pre-button u-button mini">&lt;</button>'),this.nextBtn=u.makeDOM('<button class="u-date-next-button u-button mini">&gt;</button>'),u.on(this.preBtn,"click",function(e){t.startYear-=10,t._fillYear()}),u.on(this.nextBtn,"click",function(e){t.startYear+=10,t._fillYear()}),this.panelContentDiv.appendChild(this.preBtn),this.panelContentDiv.appendChild(this.nextBtn),this._fillYear(),this.element.parentNode.appendChild(this.panelDiv)},u.YearMonth.fn._fillYear=function(t){var e,i,n,s,a,c,l;for(e=this.panelContentDiv.querySelector(".u-date-content-page"),e&&this.panelContentDiv.removeChild(e),i=['<div class="u-date-content-page">','<div class="u-date-content-title"></div>','<div class="u-date-content-panel"></div>',"</div>"].join(""),n=u.makeDOM(i),s=n.querySelector(".u-date-content-title"),s.innerHTML=this.startYear+"-"+(this.startYear+11),a=n.querySelector(".u-date-content-panel"),c=0;12>c;c++)l=u.makeDOM('<div class="u-date-content-year-cell">'+(this.startYear+c)+"</div>"),new URipple(l),this.startYear+c==this.year&&u.addClass(l,"current"),l._value=this.startYear+c,a.appendChild(l);var o=this;u.on(a,"click",function(t){var e=t.target._value;o.year=e,o._fillMonth(),u.stopEvent(t)}),this.preBtn.style.display="block",this.nextBtn.style.display="block",this.panelContentDiv.appendChild(n),this.contentPage=n,this.currentPanel="year"},u.YearMonth.fn._fillMonth=function(){var t,e,i,n,s,a;for(t=this.panelContentDiv.querySelector(".u-date-content-page"),t&&this.panelContentDiv.removeChild(t),n=this.month,e=['<div class="u-date-content-page">','<div class="u-date-content-title">'+n+"月</div>",'<div class="u-date-content-panel">','<div class="u-date-content-year-cell">1月</div>','<div class="u-date-content-year-cell">2月</div>','<div class="u-date-content-year-cell">3月</div>','<div class="u-date-content-year-cell">4月</div>','<div class="u-date-content-year-cell">5月</div>','<div class="u-date-content-year-cell">6月</div>','<div class="u-date-content-year-cell">7月</div>','<div class="u-date-content-year-cell">8月</div>','<div class="u-date-content-year-cell">9月</div>','<div class="u-date-content-year-cell">10月</div>','<div class="u-date-content-year-cell">11月</div>','<div class="u-date-content-year-cell">12月</div>',"</div>","</div>"].join(""),
i=u.makeDOM(e),s=i.querySelectorAll(".u-date-content-year-cell"),a=0;a<s.length;a++)n==a+1&&u.addClass(s[a],"current"),s[a]._value=a+1,new URipple(s[a]);var c=this;u.on(i,"click",function(t){var e=t.target._value;c.month=e,i.querySelector(".u-date-content-title").innerHTML=e+"月",c.setValue(c.year+"-"+c.month),c.hide()}),this.preBtn.style.display="none",this.nextBtn.style.display="none",this._zoomIn(i),this.currentPanel="month"},u.YearMonth.fn._zoomIn=function(t){if(!this.contentPage)return this.panelContentDiv.appendChild(t),void(this.contentPage=t);if(u.addClass(t,"zoom-in"),this.panelContentDiv.appendChild(t),u.isIE8)this.contentPage=t;else{var e=function(){t.removeEventListener("transitionend",e),t.removeEventListener("webkitTransitionEnd",e),this.contentPage=t}.bind(this);this.contentPage&&(t.addEventListener("transitionend",e),t.addEventListener("webkitTransitionEnd",e)),window.requestAnimationFrame(function(){u.addClass(this.contentPage,"is-hidden"),u.removeClass(t,"zoom-in")}.bind(this))}},u.YearMonth.fn.setValue=function(t){if(t=t?t:"",t&&t.indexOf("-")>-1){var e=t.split("-");this.year=e[0];var i=e[1];this.month=i%12,0==this.month&&(this.month=12),t=this.year+"-"+this.month}this.value=t,this.input.value=t,this.trigger("valueChange",{value:t})},u.YearMonth.fn.focusEvent=function(){var t=this;u.on(this.element,"click",function(e){t.show(e),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0})},u.YearMonth.fn.clickEvent=function(){var t=this,e=this.element.nextSibling;u.on(e,"click",function(e){t.show(e),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0})},u.YearMonth.fn.show=function(t){var e=this;if(this.value&&this.value.indexOf("-")>-1){var i=this.value.split("-");this.year=i[0];var n=i[1];this.month=n%12,0==this.month&&(this.month=12)}this.createPanel(),this.width=this.element.offsetWidth,this.width<300&&(this.width=300),this.panelDiv.style.width=this.width+"px",u.showPanelByEle({ele:this.input,panel:this.panelDiv,position:"bottomLeft"}),document.body.onscroll=function(){u.showPanelByEle({ele:e.input,panel:e.panelDiv,position:"bottomLeft"})},this.panelDiv.style.zIndex=u.getZIndex(),u.addClass(this.panelDiv,"is-visible");var e=this,s=function(i){i===t||i.target===e.input||e.clickPanel(i.target)||(u.off(document,"click",s),e.hide())};u.on(document,"click",s)},u.YearMonth.fn.clickPanel=function(t){for(;t;){if(t==this.panelDiv)return!0;t=t.parentNode}return!1},u.YearMonth.fn.hide=function(){u.removeClass(this.panelDiv,"is-visible"),this.panelDiv.style.zIndex=-1},u.compMgr&&u.compMgr.regComp({comp:u.YearMonth,compAsString:"u.YearMonth",css:"u-yearmonth"}),u.Year=u.BaseComponent.extend({DEFAULTS:{},init:function(){this.element;this.options=u.extend({},this.DEFAULTS,this.options),this.panelDiv=null,this.input=this.element.querySelector("input");var t=new Date;this.year=t.getFullYear(),this.defaultYear=this.year,this.startYear=this.year-this.year%10-1,u.on(this.input,"blur",function(t){this.setValue(this.input.value)}.bind(this)),this.focusEvent(),this.clickEvent()}}),u.Year.fn=u.Year.prototype,u.Year.fn.createPanel=function(){if(this.panelDiv)return void this._fillYear();var t=this;this.panelDiv=u.makeDOM('<div class="u-date-panel" style="padding:0px;margin:0px;"></div>'),this.panelContentDiv=u.makeDOM('<div class="u-date-content"></div>'),this.panelDiv.appendChild(this.panelContentDiv),this.preBtn=u.makeDOM('<button class="u-date-pre-button u-button mini">&lt;</button>'),this.nextBtn=u.makeDOM('<button class="u-date-next-button u-button mini">&gt;</button>'),u.on(this.preBtn,"click",function(e){t.startYear-=10,t._fillYear()}),u.on(this.nextBtn,"click",function(e){t.startYear+=10,t._fillYear()}),this.panelContentDiv.appendChild(this.preBtn),this.panelContentDiv.appendChild(this.nextBtn),this._fillYear(),this.element.parentNode.appendChild(this.panelDiv)},u.Year.fn._fillYear=function(t){var e,i,n,s,a,c,l;for(e=this.panelContentDiv.querySelector(".u-date-content-page"),e&&this.panelContentDiv.removeChild(e),i=['<div class="u-date-content-page">','<div class="u-date-content-title"></div>','<div class="u-date-content-panel"></div>',"</div>"].join(""),n=u.makeDOM(i),s=n.querySelector(".u-date-content-title"),s.innerHTML=this.startYear+"-"+(this.startYear+11),a=n.querySelector(".u-date-content-panel"),c=0;12>c;c++)l=u.makeDOM('<div class="u-date-content-year-cell">'+(this.startYear+c)+"</div>"),new URipple(l),this.startYear+c==this.year&&u.addClass(l,"current"),l._value=this.startYear+c,a.appendChild(l);u.on(a,"click",function(t){var e=t.target._value;this.year=e,this.setValue(e),this.hide(),u.stopEvent(t)}.bind(this)),this.preBtn.style.display="block",this.nextBtn.style.display="block",this.panelContentDiv.appendChild(n),this.currentPanel="year"},u.Year.fn.setValue=function(t){t=t?t:"",this.value=t,t?this.year=t:this.year=this.defaultYear,this.startYear=this.year-this.year%10-1,this.input.value=t,this.trigger("valueChange",{value:t})},u.Year.fn.focusEvent=function(){var t=this;u.on(this.element,"click",function(e){t.show(e),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0})},u.Year.fn.clickEvent=function(){var t=this,e=this.element.nextSibling;u.on(e,"click",function(e){t.show(e),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0})},u.Year.fn.show=function(t){var e=this;this.createPanel(),this.width=this.element.offsetWidth,this.width<300&&(this.width=300),this.panelDiv.style.width="152px",u.showPanelByEle({ele:this.input,panel:this.panelDiv,position:"bottomLeft"}),document.body.onscroll=function(){u.showPanelByEle({ele:e.input,panel:e.panelDiv,position:"bottomLeft"})},this.panelDiv.style.zIndex=u.getZIndex(),u.addClass(this.panelDiv,"is-visible");var i=function(n){n===t||n.target===this.input||e.clickPanel(n.target)||(u.off(document,"click",i),this.hide())}.bind(this);u.on(document,"click",i)},u.Year.fn.clickPanel=function(t){for(;t;){if(t==this.panelDiv)return!0;t=t.parentNode}return!1},u.Year.fn.hide=function(){u.removeClass(this.panelDiv,"is-visible"),this.panelDiv.style.zIndex=-1},u.compMgr&&u.compMgr.regComp({comp:u.Year,compAsString:"u.Year",css:"u-year"}),u.Month=u.BaseComponent.extend({DEFAULTS:{},init:function(){this.element;this.options=u.extend({},this.DEFAULTS,this.options),this.panelDiv=null,this.input=this.element.querySelector("input");var t=new Date;this.month=t.getMonth()+1,this.defaultMonth=this.month,u.on(this.input,"blur",function(t){this.setValue(this.input.value)}.bind(this)),this.focusEvent(),this.clickEvent()}}),u.Month.fn=u.Month.prototype,u.Month.fn.createPanel=function(){if(this.panelDiv)return void this._fillMonth();var t=this;this.panelDiv=u.makeDOM('<div class="u-date-panel" style="padding:0px;margin:0px;"></div>'),this.panelContentDiv=u.makeDOM('<div class="u-date-content"></div>'),this.panelDiv.appendChild(this.panelContentDiv),this.preBtn=u.makeDOM('<button class="u-date-pre-button u-button flat floating mini" style="display:none;">&lt;</button>'),this.nextBtn=u.makeDOM('<button class="u-date-next-button u-button flat floating mini" style="display:none;">&gt;</button>'),u.on(this.preBtn,"click",function(e){t.startYear-=10,t._fillYear()}),u.on(this.nextBtn,"click",function(e){t.startYear+=10,t._fillYear()}),this.panelContentDiv.appendChild(this.preBtn),this.panelContentDiv.appendChild(this.nextBtn),this._fillMonth(),this.element.parentNode.appendChild(this.panelDiv)},u.Month.fn._fillMonth=function(){var t,e,i,n,s,a;for(t=this.panelContentDiv.querySelector(".u-date-content-page"),t&&this.panelContentDiv.removeChild(t),n=this.month,e=['<div class="u-date-content-page">','<div class="u-date-content-title">'+n+"月</div>",'<div class="u-date-content-panel">','<div class="u-date-content-year-cell">1月</div>','<div class="u-date-content-year-cell">2月</div>','<div class="u-date-content-year-cell">3月</div>','<div class="u-date-content-year-cell">4月</div>','<div class="u-date-content-year-cell">5月</div>','<div class="u-date-content-year-cell">6月</div>','<div class="u-date-content-year-cell">7月</div>','<div class="u-date-content-year-cell">8月</div>','<div class="u-date-content-year-cell">9月</div>','<div class="u-date-content-year-cell">10月</div>','<div class="u-date-content-year-cell">11月</div>','<div class="u-date-content-year-cell">12月</div>',"</div>","</div>"].join(""),i=u.makeDOM(e),s=i.querySelectorAll(".u-date-content-year-cell"),a=0;a<s.length;a++)n==a+1&&u.addClass(s[a],"current"),s[a]._value=a+1,new URipple(s[a]);u.on(i,"click",function(t){var e=t.target._value;this.month=e,i.querySelector(".u-date-content-title").innerHTML=e+"月",this.setValue(e),this.hide()}.bind(this)),this.preBtn.style.display="none",this.nextBtn.style.display="none",this.panelContentDiv.appendChild(i),this.currentPanel="month"},u.Month.fn.setValue=function(t){t=t?t:"",this.value=t,t?this.month=t:this.month=this.defaultMonth,this.input.value=t,this.trigger("valueChange",{value:t})},u.Month.fn.focusEvent=function(){var t=this;u.on(this.element,"click",function(e){t.show(e),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0})},u.Month.fn.clickEvent=function(){var t=this,e=this.element.nextSibling;u.on(e,"click",function(e){t.show(e),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0})},u.Month.fn.show=function(t){var e=this;this.createPanel(),this.width=this.element.offsetWidth,this.width<300&&(this.width=300),u.showPanelByEle({ele:this.input,panel:this.panelDiv,position:"bottomLeft"}),document.body.onscroll=function(){u.showPanelByEle({ele:e.input,panel:e.panelDiv,position:"bottomLeft"})},this.panelDiv.style.width="152px",this.panelDiv.style.zIndex=u.getZIndex(),u.addClass(this.panelDiv,"is-visible");var i=function(n){n===t||n.target===this.input||e.clickPanel(n.target)||(u.off(document,"click",i),this.hide())}.bind(this);u.on(document,"click",i)},u.Month.fn.clickPanel=function(t){for(;t;){if(t==this.panelDiv)return!0;t=t.parentNode}return!1},u.Month.fn.hide=function(){u.removeClass(this.panelDiv,"is-visible"),this.panelDiv.style.zIndex=-1},u.compMgr&&u.compMgr.regComp({comp:u.Month,compAsString:"u.Month",css:"u-month"}),u.ClockPicker=u.BaseComponent.extend({DEFAULTS:{},init:function(){this.element;this.options=u.extend({},this.DEFAULTS,this.options),this.format=this.options.format||u.core.getMaskerMeta("time").format,this.panelDiv=null,this.input=this.element.querySelector("input"),u.isMobile&&this.input.setAttribute("readonly","readonly"),u.addClass(this.element,"u-text"),this.template='<div class="u-clock-ul popover clockpicker-popover" style="padding:0px;">',this.template+='<div class="popover-title"><button class="u-button u-date-clean u-clock-clean" >清空</button><span class="clockpicker-span-hours">02</span> : <span class="clockpicker-span-minutes text-primary">01</span><span class="clockpicker-span-am-pm"></span></div>',this.template+='<div class="popover-content">',this.template+='	<div class="clockpicker-plate">',this.template+='		<div class="clockpicker-canvas">',this.template+='			<svg class="clockpicker-svg">',this.template+='				<g transform="translate(100,100)">',this.template+='					<circle class="clockpicker-canvas-bg clockpicker-canvas-bg-trans" r="13" cx="8.362277061412277" cy="-79.56175162946187"></circle>',this.template+='					<circle class="clockpicker-canvas-fg" r="3.5" cx="8.362277061412277" cy="-79.56175162946187"></circle>',this.template+='					<line x1="0" y1="0" x2="8.362277061412277" y2="-79.56175162946187"></line>',this.template+='					<circle class="clockpicker-canvas-bearing" cx="0" cy="0" r="2"></circle>',this.template+="				</g>",this.template+="			</svg>",this.template+="		</div>",this.template+='		<div class="clockpicker-dial clockpicker-hours" style="visibility: visible;">',this.template+='			<div class="clockpicker-tick clockpicker-tick-1" >00</div>',this.template+='			<div class="clockpicker-tick clockpicker-tick-2" >1</div>',this.template+='			<div class="clockpicker-tick clockpicker-tick-3" >2</div>',this.template+='			<div class="clockpicker-tick clockpicker-tick-4" >3</div>',this.template+='			<div class="clockpicker-tick clockpicker-tick-5" >4</div>',this.template+='			<div class="clockpicker-tick clockpicker-tick-6" >5</div>',this.template+='			<div class="clockpicker-tick clockpicker-tick-7" >6</div>',this.template+='			<div class="clockpicker-tick clockpicker-tick-8" >7</div>',this.template+='			<div class="clockpicker-tick clockpicker-tick-9" >8</div>',this.template+='			<div class="clockpicker-tick clockpicker-tick-10" >9</div>',this.template+='			<div class="clockpicker-tick clockpicker-tick-11" >10</div>',this.template+='			<div class="clockpicker-tick clockpicker-tick-12" >11</div>',this.template+='			<div class="clockpicker-tick clockpicker-tick-13" >12</div>',this.template+='			<div class="clockpicker-tick clockpicker-tick-14" >13</div>',this.template+='			<div class="clockpicker-tick clockpicker-tick-15" >14</div>',this.template+='			<div class="clockpicker-tick clockpicker-tick-16" >15</div>',this.template+='			<div class="clockpicker-tick clockpicker-tick-17" >16</div>',this.template+='			<div class="clockpicker-tick clockpicker-tick-18" >17</div>',this.template+='			<div class="clockpicker-tick clockpicker-tick-19" >18</div>',this.template+='			<div class="clockpicker-tick clockpicker-tick-20" >19</div>',this.template+='			<div class="clockpicker-tick clockpicker-tick-21" >20</div>',this.template+='			<div class="clockpicker-tick clockpicker-tick-22" >21</div>',this.template+='			<div class="clockpicker-tick clockpicker-tick-23" >22</div>',this.template+='			<div class="clockpicker-tick clockpicker-tick-24" >23</div>',this.template+="		</div>",this.template+='		<div class="clockpicker-dial clockpicker-minutes" style="visibility: hidden;">',this.template+='			<div class="clockpicker-tick clockpicker-tick-25" >00</div>',this.template+='			<div class="clockpicker-tick clockpicker-tick-26" >05</div>',this.template+='			<div class="clockpicker-tick clockpicker-tick-27" >10</div>',this.template+='			<div class="clockpicker-tick clockpicker-tick-28" >15</div>',this.template+='			<div class="clockpicker-tick clockpicker-tick-29" >20</div>',this.template+='			<div class="clockpicker-tick clockpicker-tick-30" >25</div>',this.template+='			<div class="clockpicker-tick clockpicker-tick-31" >30</div>',this.template+='			<div class="clockpicker-tick clockpicker-tick-32" >35</div>',this.template+='			<div class="clockpicker-tick clockpicker-tick-33" >40</div>',this.template+='			<div class="clockpicker-tick clockpicker-tick-34" >45</div>',this.template+='			<div class="clockpicker-tick clockpicker-tick-35" >50</div>',this.template+='			<div class="clockpicker-tick clockpicker-tick-36" >55</div>',this.template+="		</div>",this.template+='	</div><span class="clockpicker-am-pm-block"></span></div>',this.template+="	</div>",u.on(this.input,"blur",function(t){this.setValue(this.input.value)}.bind(this));var t=new Date;this.defaultHour=t.getHours()>9?""+t.getHours():"0"+t.getHours(),this.defaultMin=t.getMinutes()>9?""+t.getMinutes():"0"+t.getMinutes(),this.defaultSec=t.getSeconds()>9?""+t.getSeconds():"0"+t.getSeconds(),this.hours=this.defaultHour,this.min=this.defaultMin,this.sec=this.defaultSec,this.focusEvent(),this.clickEvent()}}),u.ClockPicker.fn=u.ClockPicker.prototype,u.ClockPicker.fn._zoomIn=function(t){u.addClass(t,"zoom-in");var e=function(){u.off(t,"transitionend",e),u.off(t,"webkitTransitionEnd",e),this.contentPage=t}.bind(this);this.contentPage&&(u.on(t,"transitionend",e),u.on(t,"webkitTransitionEnd",e)),setTimeout(function(){t.style.visibility="visible",u.removeClass(t,"zoom-in")},150)},u.ClockPicker.fn.createPanel=function(){if(!this.panelDiv){this.panelDiv=u.makeDOM(this.template),this.hand=this.panelDiv.querySelector("line"),this.bg=this.panelDiv.querySelector(".clockpicker-canvas-bg"),this.fg=this.panelDiv.querySelector(".clockpicker-canvas-fg"),this.titleHourSpan=this.panelDiv.querySelector(".clockpicker-span-hours"),this.titleMinSpan=this.panelDiv.querySelector(".clockpicker-span-minutes"),this.hourDiv=this.panelDiv.querySelector(".clockpicker-hours"),this.minDiv=this.panelDiv.querySelector(".clockpicker-minutes"),this.btnClean=this.panelDiv.querySelector(".u-date-clean"),u.isMobile||(this.btnClean.style.display="none"),this.currentView="hours",u.on(this.hourDiv,"click",function(t){var e=t.target;u.hasClass(e,"clockpicker-tick")&&(this.hours=e.innerHTML,this.hours=this.hours>9||0==this.hours?""+this.hours:"0"+this.hours,this.titleHourSpan.innerHTML=this.hours,this.hourDiv.style.visibility="hidden",this._zoomIn(this.minDiv),this.currentView="min",this.setHand())}.bind(this)),u.on(this.minDiv,"click",function(t){var e=t.target;if(u.hasClass(e,"clockpicker-tick")){this.min=e.innerHTML,this.titleMinSpan.innerHTML=this.min,this.minDiv.style.visibility="hidden",this.hourDiv.style.visibility="visible",this.currentView="hours";var i=this.hours+":"+this.min+":"+this.sec;this.setValue(i),this.hide()}}.bind(this)),u.on(this.btnClean,"click",function(t){this.setValue(""),this.hide()}.bind(this)),document.body.appendChild(this.panelDiv)}},u.ClockPicker.fn.setHand=function(){var t=54,e=80,i=this.currentView,n=this[i],s="hours"===i,a=Math.PI/(s?6:30),c=n*a,l=s&&n>0&&13>n?t:e,o=Math.sin(c)*l,r=-Math.cos(c)*l;this.setHandFun(o,r)},u.ClockPicker.fn.setHandFun=function(t,e,i,n){var s,a=54,c=80,l=Math.atan2(t,-e),o="hours"===this.currentView,r=Math.PI/(o?6:30),u=Math.sqrt(t*t+e*e),h=this.options,d=o&&(c+a)/2>u,p=d?a:c;this.twelvehour&&(p=c),0>l&&(l=2*Math.PI+l),s=Math.round(l/r),l=s*r,h.twelvehour?o?0===s&&(s=12):(i&&(s*=5),60===s&&(s=0)):o?(12===s&&(s=0),s=d?0===s?12:s:0===s?0:s+12):(i&&(s*=5),60===s&&(s=0));var v=this.panelDiv.querySelector(".clockpicker-plate").offsetWidth,k=v/200,m=Math.sin(l)*p*k,f=-Math.cos(l)*p*k,D=100*k;this.panelDiv.querySelector("g").setAttribute("transform","translate("+D+","+D+")"),this.hand.setAttribute("x2",m),this.hand.setAttribute("y2",f),this.bg.setAttribute("cx",m),this.bg.setAttribute("cy",f),this.fg.setAttribute("cx",m),this.fg.setAttribute("cy",f)},u.ClockPicker.fn.setValue=function(t){if(t=t?t:"",""==t)return this.input.value="",void this.trigger("valueChange",{value:""});if(t&&t.indexOf(":")>-1){var e=t.split(":"),i=e[0];i%=24,this.hours=i>9?""+i:"0"+i;var n=e[1];n%=60,this.min=n>9?""+n:"0"+n;var s=e[2]||0;s%=60,this.sec=s>9?""+s:"0"+s,t=this.hours+":"+this.min+":"+this.sec}else this.hours=this.defaultHour,this.min=this.defaultMin,this.sec=this.defaultSec;var a=new Date;a.setHours(this.hours),a.setMinutes(this.min),a.setSeconds(this.sec);var c=u.date.format(a,this.format);this.input.value=c,this.trigger("valueChange",{value:t})},u.ClockPicker.fn.focusEvent=function(){var t=this;u.on(this.element,"click",function(e){t.show(e),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0})},u.ClockPicker.fn.clickEvent=function(){var t=this,e=this.element.nextSibling;u.on(e,"click",function(e){t.show(e),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0})},u.ClockPicker.fn.show=function(t){var e=this.input.value;this.setValue(e);var i=this;if(this.createPanel(),this.minDiv.style.visibility="hidden",this.hourDiv.style.visibility="visible",this.currentView="hours",this.titleHourSpan.innerHTML=this.hours,this.titleMinSpan.innerHTML=this.min,u.isMobile){this.panelDiv.style.position="fixed",this.panelDiv.style.top="20%";var n=document.body.clientWidth,s=(n-226)/2;this.panelDiv.style.left=s+"px",this.overlayDiv=u.makeModal(this.panelDiv),u.on(this.overlayDiv,"click",function(){i.hide()})}else u.showPanelByEle({ele:this.input,panel:this.panelDiv,position:"bottomLeft"}),document.body.onscroll=function(){u.showPanelByEle({ele:i.input,panel:i.panelDiv,position:"bottomLeft"})};this.panelDiv.style.zIndex=u.getZIndex(),u.addClass(this.panelDiv,"is-visible"),this.setHand();var a=function(e){e===t||e.target===this.input||i.clickPanel(e.target)||(u.off(document,"click",a),this.hide())}.bind(this);u.on(document,"click",a)},u.ClockPicker.fn.clickPanel=function(t){for(;t;){if(t==this.panelDiv)return!0;t=t.parentNode}return!1},u.ClockPicker.fn.hide=function(){if(u.removeClass(this.panelDiv,"is-visible"),this.panelDiv.style.zIndex=-1,this.overlayDiv)try{document.body.removeChild(this.overlayDiv)}catch(t){}},u.compMgr&&(u.isIE8||u.compMgr.regComp({comp:u.ClockPicker,compAsString:"u.ClockPicker",css:"u-clockpicker"}));