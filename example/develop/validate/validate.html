<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
     <link rel="stylesheet" type="text/css" href="../../../vendor/uui/fonts/font-awesome/css/font-awesome.css">
    <link rel="stylesheet" type="text/css"  href="../../../vendor/uui/css/u.css"></head>
<body>
<br>
<br>
<br>
<h3>u-meta校验</h3>
<!--浮点型校验  type为u-text-->
<div class="u-text"  u-meta='{"id":"f1","type":"u-text","data":"dt1","field":"f1"}'>
    <input class="u-input"/>
    <label class="u-label">string类型</label>
</div>

<br>
<br>
<br>


    <!--浮点型校验  type为u-text-->
    <div class="u-text"  u-meta='{"id":"f2","type":"u-text","data":"dt1","field":"f2","tipId":"floatInfo1","successId":"floatsuccess1"}'>
        <input class="u-input"/>
        <label class="u-label">float类型</label>
        <span id="floatsuccess1" class="u-form-control-success fa fa-check-circle" ></span>
        <span class="u-form-control-info fa fa-exclamation-circle " id='floatInfo1'></span>
    </div>
    <br>
    <br>
    <br>
    <!--浮点型校验 type为 float-->
    <input  u-meta='{"id":"f22","type":"float","data":"dt1","field":"f1"}' />


<br>
<br>
<br>


<!--正则校验-->
<div class="u-text"  u-meta='{"id":"f3","type":"u-text","data":"dt1","field":"f3"}'>
    <input class="u-input"/>
    <label class="u-label">正则校验,6位整数</label>
</div>

<br>
<br>
<br>


<!--必填-->
<div class="u-text"  u-meta='{"id":"f4","type":"u-text","data":"dt1","field":"f4"}'>
    <input class="u-input"/>
    <label class="u-label">必填</label>
</div>
<br>
<br>
<br>

<!--自定义信息内容-->
<div class="u-text"  u-meta='{"id":"f3","type":"u-text","data":"dt1","field":"f3","errorMsg":"自定义的错误信息","nullMsg":"自定义的不能为空信息"}'>
    <input class="u-input"/>
    <label class="u-label">6位整数,自定义信息</label>
</div>

<br>
<br>
<br>

<!--自定义显示位置-->
<div class="u-text"  u-meta='{"id":"f3","type":"u-text","data":"dt1","field":"f3","tipId":"testDiv"}'>
    <input class="u-input"/>
    <label class="u-label">自定义显示位置</label>
</div>
<span id="testDiv"></span>

<br>
<br>
<br>
    <button class="u-button" data-bind="click:btn1Click">校验</button>

<br>
<br>
<br>
<h3>普通input校验</h3>
<form class="u-form-inline">
    <div class="u-form-group" >
        <label for="float1">String:</label>
        <div class="err-info">
        <input type="text" class="u-form-control" id="float1" placeholder="字符串长度大于3小于8"  u-options='{"required":true,"tipId":"floatInfo","maxLength":8,"minLength":3,"successId":"floatsuccess"}'>
        <span id="floatsuccess" style="color:green" class="u-form-control-success fa fa-check-circle" ></span>
        <span class="u-form-control-info fa fa-exclamation-circle " id='floatInfo'></span>
        </div>
    </div>
   
</form>

<style type="text/css">
    .err-info{
        display: inline-block
    }
    
    .err-info .u-form-control-info{
        position: absolute;
    }
</style>
<script src="../../../vendor/knockout/knockout-3.2.0.debug.js"></script>
    <script src="../../../vendor/uui/js/u-polyfill.js"></script>
    <script src="../../../vendor/uui/js/u.js"></script>

    <script>
        /**
         * 校验类型说明：
         *  validType:校验类型（integer、float、zipCode、phone、landline、email、url、datetime）
         *  max: 数字最大值
         *  min: 数字最小值
         *  maxLength: string最大长度
         *  minLength: string最小长度
         *  required: 必填
         *  tipId：错误信息提示的div的id值
         *  successId：正确信息显示的id值
         *  regExp：正则表达式校验
         *  errorMsg：错误提示信息
         *  nullMsg：空提示信息
         */
        var app,viewModel;
        viewModel = {
            dt1: new u.DataTable({
                meta:{
                f1:{type:'string',maxLength:8,minLength:3},
                f2:{type:'float', precision:2,max:500,min:100},
                f3:{type: 'integer', required:true,regExp:/^[0-9]{6}$/},
                f4:{type:'string',required:true}

            }
        }),
        btn1Click: function(){
                app.compsValidate(document.querySelector('body'));
            }
        };


        app = u.createApp({
            el:'body',
            model:viewModel
        });

        var r = viewModel.dt1.createEmptyRow();
        viewModel.dt1.setRowSelect(0);

        //普通输入框校验
         u.on(window, 'load', function() {
            u.validate('body');
            u.on(document.querySelector('#validateBtn'), 'click', function(e){
                u.doValidate('body');
                u.stopEvent(e);
            })
        });
    </script>
</body>
</html>